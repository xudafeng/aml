/*! aml v1.0.0 xdf email:xudafeng[at]126.com 2013-09-08 14:04:42 */
!function(a){"use strict";function b(){function a(a,b){for(var c in b)a[c]=b[c];return a}for(var b,c=0;c<arguments.length;)b=c?a(b,arguments[c]):arguments[c],c++;return b}function c(a,b){if(a)for(var c in a)"length"!==c&&"item"!==c&&b.call(this,a[c],c);return a}function d(a){return function(b){return Object.prototype.toString.call(b)==="[object "+a+"]"}}function e(a){return function(b){return"array"==a||"string"==a?0===b.length:void 0}}function f(){}function g(){}function h(){var a=r.path?r.path:n.href;return a}function i(a){this.id=a,this.pwd=h(),this.init()}function j(){}if(!a.aml){var k="1.0.0",l=document.head||document.getElementsByTagName("head")[0]||document.documentElement,m=document,n=location,o=".js",p={version:k},q=p.data={},r={};d("String"),d("Object"),d("Function");var s=d("Undefined"),t=e("array");e("string");var u=function(a){return/\.css$/i.test(a)};f.cache={},b(f,{fire:function(a,b){s(this.cache[a])||this.cache[a].call(this,b)},on:function(a,b){this.cache[a]=b},detach:function(a){s(this.cache[a])||delete this.cache[a]}}),b(g,{}),i.prototype={init:function(){this.router()},router:function(){var a=this;u(a.id)||a.getScript(this.pwd+a.id+o)},getScript:function(a,b,c){var d=m.createElement("script");return d.src=a,d.async=!0,c&&(d.charset=c),m.addEventListener?d.addEventListener("load",b,!1):d.onreadystatechange=function(){("loaded"==d.readyState||"complete"==d.readyState)&&(d.onreadystatechange=null,b())},l.insertBefore(d,l.firstChild),d}},b(j,{define:function(a,b,c){f.fire("define",{id:a,deps:b,constructor:c})},require:function(a){return f.fire("load",a),null},exec:function(a){q[a.id].instance=q[a.id].constructor.apply(this,a.depsMods)||{},f.fire("check",q)},load:function(a){new i(a)},save:function(a){q[a.id]&&q[a.id]!=a.id||(q[a.id]=a,f.fire("check",q))},check:function(a){c(a,function(a){if(!a.instance&&a!=q[a]){var b=[],d=[],e=[];c(a.deps,function(a){q[a]?q[a].instance?d.push(q[a].instance):b.push(q[a]):(e.push(a),q[a]=a)}),t(e)&&t(b)?f.fire("exec",{id:a.id,depsMods:d}):(c(e,function(a){f.fire("load",a)}),f.fire("check",b))}})}}),f.on("define",function(a){f.fire("save",a)}),f.on("check",function(a){j.check(a)}),f.on("exec",function(a){j.exec(a)}),f.on("load",function(a){j.load(a)}),f.on("save",function(a){j.save(a)}),j.define.amd={},a.define=j.define,a.require=j.require,b(p,{config:function(a){b(r,a)}}),a.aml=p}}(this);
/*
//@ sourceMappingURL=1.0.0/bin/aml.map
*/