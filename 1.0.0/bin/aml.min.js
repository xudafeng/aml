/*! aml v1.0.0 xdf email:xudafeng[at]126.com 2013-09-08 19:17:13 */
!function(a){"use strict";function b(){function a(a,b){for(var c in b)a[c]=b[c];return a}for(var b,c=0;c<arguments.length;)b=c?a(b,arguments[c]):arguments[c],c++;return b}function c(a,b){if(a)for(var c in a)"length"!==c&&"item"!==c&&b.call(this,a[c],c);return a}function d(a){return function(b){return Object.prototype.toString.call(b)==="[object "+a+"]"}}function e(a){return function(b){return"array"==a||"string"==a?0===b.length:void 0}}function f(){}function g(){}function h(){var a=t.path?t.path:o.href;return a}function i(a){this.id=a,this.pwd=h(),this.init()}function j(){}function k(){var a=n.getElementsByTagName("script");return a[a.length-1]}if(!a.aml){var l="1.0.0",m=document.head||document.getElementsByTagName("head")[0]||document.documentElement,n=document,o=location,p=".js",q=".css",r={version:l},s=r.data={},t={};d("String"),d("Object"),d("Function");var u=d("Undefined"),v=e("array");e("string");var w=function(a){return/\.js$/i.test(a)},x=function(a){return/\.css$/i.test(a)};f.cache={},b(f,{fire:function(a,b){u(this.cache[a])||this.cache[a].call(this,b)},on:function(a,b){this.cache[a]=b},detach:function(a){u(this.cache[a])||delete this.cache[a]}}),b(g,{}),i.prototype={init:function(){this.router()},router:function(){var a=this;x(a.id)?a.getStyle(this.pwd+a.id+q):a.getScript(w(a.id)?a.id:this.pwd+a.id+p)},getScript:function(a,b,c){var d=n.createElement("script");return d.src=a,d.async=!0,c&&(d.charset=c),n.addEventListener?d.addEventListener("load",b,!1):d.onreadystatechange=function(){("loaded"==d.readyState||"complete"==d.readyState)&&(d.onreadystatechange=null,b())},m.insertBefore(d,m.firstChild),d},getStyle:function(a,b,c){var d=n.createElement("link");return d.rel="stylesheet",d.href=a,c&&(d.charset=c),d.addEventListener("load",b,!1),m.appendChild(d),d}},b(j,{define:function(a,b,c){f.fire("define",{id:a,deps:b,constructor:c})},require:function(a){return f.fire("load",a),null},exec:function(a){s[a.id].instance=s[a.id].constructor.apply(this,a.depsMods)||{},f.fire("check",s)},load:function(a){new i(a)},save:function(a){s[a.id]&&s[a.id]!=a.id||(s[a.id]=a,f.fire("check",s))},check:function(a){c(a,function(a){if(!a.instance&&a!=s[a]){var b=[],d=[],e=[];c(a.deps,function(a){s[a]?s[a].instance?d.push(s[a].instance):b.push(s[a]):(e.push(a),s[a]=a)}),v(e)&&v(b)?f.fire("exec",{id:a.id,depsMods:d}):(c(e,function(a){f.fire("load",a)}),f.fire("check",b))}})}}),f.on("define",function(a){f.fire("save",a)}),f.on("check",function(a){j.check(a)}),f.on("exec",function(a){j.exec(a)}),f.on("load",function(a){j.load(a)}),f.on("save",function(a){j.save(a)}),j.define.amd={},a.define=j.define,a.require=j.require,new i(k().getAttribute("data-init")),b(r,{config:function(a){b(t,a)}}),a.aml=r}}(this);
/*
//@ sourceMappingURL=1.0.0/bin/aml.map
*/